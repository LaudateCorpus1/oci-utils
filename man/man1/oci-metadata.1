.\" Process this file with
.\" groff -man -Tascii oci-metadata.1
.\"
.\" Copyright (c) 2017, 2018 Oracle and/or its affiliates. All rights reserved.
.\"
.TH OCI-METADATA 1 "MAY 2018" Linux "User Manuals"
.SH NAME
oci-metadata \- display Oracle Cloud Infrastructure compute instance metadata
.SH SYNOPSIS
.B oci-metadata [-h|--human-readable] [-j|--json] [-g
.I KEY
.B | --get
.I KEY
.B ] [-u
.I KEY=VALUE [KEY=VALUE, ...]
.B | --update
.I KEY=VALUE [KEY=VALUE, ...]
.B ] [--export] [--trim] [--help]
.SH DESCRIPTION
The
.B oci-metadata
utility displays metadata for a compute instance running in the Oracle
Cloud Infrastructure.  Without any command line options all available metadata is displayed.
.SH OPTIONS
.IP -h,\ --human-readable
(default) Print the public IP address in a form intended for humans.
.IP -j,\ --json
Print the public IP address in JSON format, intended for scripting.
.IP "-g KEY, --get KEY"
Search for the given
.B KEY
in the metadata and only display matching entries.  For example

.B oci-metadata -g macAddr

displays the MAC address of each VNIC interface.  Use the JSON output to see all available keys.
.B KEY
is not case sensitive, but it has to match the entire key.  You can use this option multiple times to display more than one key.

.IP "-u KEY=VALUE [KEY=VALUE  ...], --update KEY=VALUE [KEY=VALUE  ...]"
update the value for the given keys. Notes: Any keys other than displayName,  metadata and extendedMetadata will be set nest into 'extendedMetadata'.

You can use this option multiple times. For example:

.B oci-metadata -u displayName="test-name"   extendedMetadata=file://home/opc/extended_metadata 

This will set the "displayName", and "extendedMetadata" to the specified values.

The content of file extended_metadata looks like:

{
  'extended':{
      'test': 'test_value'
  }
}
        
.IP --export
Works with the -g option, print the command to export the keys as environment variables.
Use --help to check the available keys to export.

.IP --trim
Works with the -g option, trim the keypath to the lowest level. eg. 'instance/metadata/ssh_authorized_keys/' to 'ssh_authorized_keys'.

.IP --help
Print a summary of the command line options.
.SH DIAGNOSTICS
Return an exit status of 0 for success or 1 if an error occured.
.SH "SEE ALSO"
.BR oci-public-ip (1),
.BR ocid (8)
.BR oci-utils.conf.d (5)
